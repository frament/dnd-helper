<div class="bg-gray-800 rounded-lg p-6 h-full overflow-auto">
  <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
    <!-- Левая колонка: Основная информация -->
    <div class="lg:col-span-1">
      <div class="bg-gray-900 p-5 rounded-xl">
        <h3 class="text-lg font-semibold text-white mb-5">Основная информация</h3>

        <!-- Заголовок главы -->
        <div class="mb-5">
          <label class="block text-gray-400 mb-2">Название главы</label>
          <input pInputText [(ngModel)]="sig['title']"
                 class="w-full"
                 placeholder="Введите название главы">
        </div>

        <!-- Статус главы -->
        <div class="mb-5">
          <label class="block text-gray-400 mb-2">Статус</label>
          <p-selectButton [options]="statusOptions"
                          [(ngModel)]="sig['status']"
                          optionLabel="label"
                          class="w-full"></p-selectButton>
        </div>

        <!-- Уровень сложности -->
        <div class="mb-5">
          <label class="block text-gray-400 mb-2">Уровень сложности</label>
          <p-rating [(ngModel)]="sig['difficulty']"
                    [stars]="5"
                    class="flex justify-center"></p-rating>
          <div class="text-center text-sm mt-2 text-gray-400">
            {{getDifficultyText()}}
          </div>
        </div>

        <!-- Рекомендуемый уровень -->
        <div class="mb-5">
          <label class="block text-gray-400 mb-2">Рекомендуемый уровень</label>
          <p-inputNumber [(ngModel)]="sig['recommendedLevel']"
                         inputId="level"
                         [showButtons]="true"
                         buttonLayout="horizontal"
                         incrementButtonIcon="pi pi-plus"
                         decrementButtonIcon="pi pi-minus"
                         [min]="1"
                         [max]="20"
                         class="w-full"></p-inputNumber>
        </div>

        <!-- Видимость -->
        <div class="mb-5">
          <label class="block text-gray-400 mb-2">Видимость</label>
          <p-toggleswitch [(ngModel)]="sig['isPublic']"></p-toggleswitch>
          <span class="ml-3 text-gray-400">
            {{sig['isPublic']() ? 'Публичная' : 'Приватная'}}
          </span>
        </div>
      </div>
    </div>

    <!-- Центральная колонка: Аватар -->
    <div class="lg:col-span-1">
      <div class="bg-gray-900 p-5 rounded-xl h-full flex flex-col">
        <h3 class="text-lg font-semibold text-white mb-5">Изображение главы</h3>

        <div class="flex-1 flex flex-col items-center justify-center">
          <!-- Предпросмотр аватара -->
          <div class="relative mb-6">
            @if (avatar.value()) {
              <p-avatar [image]="avatar.value()"
                        size="xlarge"
                        shape="circle"
                        class="w-48 h-48 border-4 border-blue-500"></p-avatar>
            } @else {
              <div class="bg-gray-800 border-2 border-dashed border-gray-600
                         rounded-full w-48 h-48 flex items-center justify-center">
                <i class="pi pi-image text-4xl text-gray-500"></i>
              </div>
            }

            <!-- Индикатор загрузки -->
            @if (uploading()) {
              <p-progressSpinner class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2"
                                 strokeWidth="4"
                                 animationDuration=".5s"/>
            }
          </div>

          <!-- Кнопки управления изображением -->
          <div class="flex flex-wrap justify-center gap-3">
            <!-- Загрузка изображения -->
            <button pButton
                    class="p-button-success"
                    (click)="fileInput.click()">
              <i class="pi pi-upload" pButtonIcon></i>
              <span pButtonLabel>Загрузить</span>
            </button>
            <input #fileInput type="file" accept="image/*"
                   class="hidden"
                   (change)="onFileSelected($event)">

            <!-- Удалить изображение -->
            @if (avatar.value()) {
              <button pButton
                      class="p-button-danger"
                      (click)="removeImage()">
                <i class="pi pi-trash" pButtonIcon></i>
                <span pButtonLabel>Удалить</span>
              </button>
            }
          </div>

          <!-- Информация об изображении -->
          <div class="mt-6 text-center text-sm text-gray-400">
            <p>Рекомендуемый размер: 500×500 пикселей</p>
            <p>Форматы: JPG, PNG, WebP</p>
          </div>
        </div>
      </div>
    </div>

    <!-- Правая колонка: Дополнительные настройки -->
    <div class="lg:col-span-1">
      <div class="bg-gray-900 p-5 rounded-xl h-full">
        <h3 class="text-lg font-semibold text-white mb-5">Дополнительные настройки</h3>

        <!-- Теги -->
        <div class="mb-6">
          <label class="block text-gray-400 mb-2">Теги главы</label>
          <p-autoComplete [(ngModel)]="sig['tags']"
                          multiple fluid
                   placeholder="Добавьте теги..."
                   class="w-full"></p-autoComplete>
          <div class="mt-2">
            @for (tag of popularTags; track tag){
              <p-tag [value]="tag"
                     class="mr-2 mb-2 cursor-pointer"
                     (click)="addTag(tag)"
                     [rounded]="true"></p-tag>
            }

          </div>
        </div>

        <!-- Описание -->
        <div class="mb-6">
          <label class="block text-gray-400 mb-2">Краткое описание</label>
          <textarea pTextarea [(ngModel)]="sig['description']"
                    [rows]="3"
                    class="w-full"
                    placeholder="Добавьте краткое описание главы..."></textarea>
        </div>
      </div>
    </div>
  </div>
</div>
