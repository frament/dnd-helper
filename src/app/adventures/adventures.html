<div class="p-6 bg-gray-900 min-h-screen">
  <!-- Заголовок страницы -->
  <div class="flex justify-between items-center mb-8">
    <h1 class="text-3xl font-bold text-white">Список приключений</h1>
    <button pButton class="p-button-success" (click)="op.toggle($event)">
      <i class="pi pi-plus" pButtonIcon></i>
      <span pButtonLabel>Создать приключение</span>
    </button>
  </div>
  <p-popover #op>
    <p-inputgroup>
      <input type="text" pInputText #newAdvNameInput
             (keydown.enter)="createAdventure(newAdvNameInput); op.toggle($event);"/>
      <button pButton
              (click)="createAdventure(newAdvNameInput); op.toggle($event);">
        <i class="pi pi-plus" pButtonIcon></i>
      </button>
    </p-inputgroup>
  </p-popover>
  <!-- Список карточек -->
  <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
    @for (adventure of adventures.value(); track adventure.id) {
      <!-- Карточка приключения -->
      <p-card class="bg-gray-800 border border-gray-700">
        <div class="flex flex-col md:flex-row">
          <!-- Левая часть: Аватар и заголовок -->
          <div class="flex items-start mb-4 md:mb-0 md:w-1/3">
            <!--<p-avatar [image]="adventure.avatar" size="large" shape="circle"
                      class="mr-4 border-2 border-blue-500"/>-->
            <div>
              <h2 class="text-xl font-bold text-white">{{ adventure.name }}</h2>
              <div class="flex items-center mt-2">
                <p-tag [value]="adventure.status"
                       [severity]="getStatusSeverity(adventure.status)"></p-tag>
                <span class="text-gray-400 ml-2">
                <i class="pi pi-user mr-1"></i>{{ owners[adventure.owner.toString()].name }}
              </span>
              </div>
              <p class="text-gray-400 mt-2">{{ adventure.description }}</p>
            </div>
          </div>

          <!-- Правая часть: Главы и кнопки -->
          <div class="md:w-2/3 border-l border-gray-700 md:pl-6">
            <h3 class="text-lg font-semibold text-white mb-3">Доступные главы</h3>

            <!-- Список глав -->
            <div class="mb-4">
              <!--@for (chapter of adventure.chapters; track chapter.id){
                <div class="mb-2">
                  <div class="flex justify-between items-center">
                    <div class="flex items-center">
                      <i class="pi pi-bookmark text-blue-400 mr-2"></i>
                      <span class="text-gray-300">{{ chapter.title }}</span>
                    </div>
                    @if (chapter.available) {
                      <p-tag value="Доступна" severity="success"/>
                    } @else {
                      <p-tag value="Скоро" severity="info"/>
                    }
                  </div>
                </div>
              }-->
            </div>

            <!-- Кнопки действий -->
            <div class="flex justify-end space-x-2">
              <button pButton class="p-button-success p-button-sm">
                <i class="pi pi-play" pButtonIcon></i>
                <span pButtonLabel>Начать</span>
              </button>
              <button pButton class="p-button-secondary p-button-sm" (click)="gotoAdventure(adventure)">
                <i class="pi pencil" pButtonIcon></i>
                <span pButtonLabel>Редактировать</span>
              </button>
              <p-menu #menu [model]="menuItems" [popup]="true"
                      (onShow)="currentMenuAdventure = adventure"
                      (onHide)="currentMenuAdventure = undefined"
              />
              <button pButton class="p-button-text p-button-plain p-button-sm"
                      (click)="menu.toggle($event)">
                <i class="pi pi-ellipsis-v" pButtonIcon></i>
              </button>
            </div>
          </div>
        </div>
      </p-card>
    }
  </div>
</div>

